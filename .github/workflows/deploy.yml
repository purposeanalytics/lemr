name: Deployment

on: 
  push:
    tags:
      - v*
  schedule:
    - cron: "20 * * * *"


jobs:
  build:
    
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Main
        uses: actions/checkout@main
        
      - name: Lemr Files
        uses: purposeanalytics/lemur@main
        with:
          host: ${{ secrets.REMOTE_HOST }}
          username: ${{ secrets.REMOTE_USER }}
          key: ${{ secrets.SSH_KEY }}
          passphrase: ${{ secrets.SSH_KEY_PASSPHRASE }}
          target: ${{ secrets.REMOTE_APP_DIR }}
          source: '.'
          rm: true

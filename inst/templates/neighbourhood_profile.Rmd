---
output: github_document
params:
  neighbourhood: Danforth
---

---
title: `r params$neighbourhood`
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)

library(lemur)
library(dplyr)
library(ggplot2)
library(scales)
```

```{r data}
neighbourhood_profile <- neighbourhood_profiles[[params$neighbourhood]]
```

<!-- # People  -->

# Population: `r comma(neighbourhood_profile[["population"]])` (TODO households)

## Population density: `r comma(round(neighbourhood_profile[["population_density"]]))` people per square km

## Household size

```{r household-size}
neighbourhood_profile %>%
  plot_neighbourhood_profile("household_size")
```

## Mean total income

```{r mean-total-income}
neighbourhood_profile %>%
  plot_neighbourhood_profile("average_total_income") + 
  scale_x_continuous(labels = dollar)
```

# Unaffordable housing: `r percent(neighbourhood_profile[["unaffordable_housing"]], accuracy = 0.1)`

## Total people under poverty measure

## Visible minority population

```{r total-visible-minority}
total_visible_minority <- neighbourhood_profile[["visible_minority"]] %>%
  filter(group != "Not a visible minority") %>%
  pull(prop) %>%
  sum()
```

Total visible minority population: `r percent(total_visible_minority, accuracy = 0.1)`

```{r visible-minority}
neighbourhood_profile %>%
  plot_neighbourhood_profile("visible_minority")
```

<!-- # Places -->

## Private dwellings by structure

```{r structure-type}
neighbourhood_profile %>%
  plot_neighbourhood_profile("structure_type")
```

## Number of bedrooms

```{r bedrooms}
neighbourhood_profile %>%
  plot_neighbourhood_profile("bedrooms")
```

## Renter versus Owner

```{r renter-owner}
neighbourhood_profile %>%
  plot_neighbourhood_profile("renter_owner")
```

## Shelter Cost

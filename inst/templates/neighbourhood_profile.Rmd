---
output: html_document
params:
  level: neighbourhood
  neighbourhood: Danforth
  compare: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, dpi = 300, results = "asis")

library(lemur)
library(htmltools)

level <- params$level
neighbourhood <- params$neighbourhood
compare <- params$compare

title <- switch(level,
  "neighbourhood" = neighbourhood,
  "city" = "City of Toronto"
)

dataset <- lemur:::determine_dataset_from_level(level, neighbourhood)
```

---
title: `r title`
---

# Population change

```{r population-change, fig.alt = lemur:::population_change_plot_alt_text(level, neighbourhood)}
population_change <- lemur:::get_measure(dataset, "population_change")
population_change_formatted <- lemur:::format_measure(population_change, "population_change")

h2(lemur:::population_change_number(population_change_formatted))

lemur:::population_change_description(level, neighbourhood, population_change, population_change_formatted)

lemur:::population_change_plot(dataset, compare)
```

# Population density

```{r population-density, fig.alt = lemur:::population_density_plot_alt_text(level, neighbourhood)}
population_density <- lemur:::get_measure(dataset, "population_density")
population_density_formatted <- lemur:::format_measure(population_density, "population_density")

h2(lemur:::population_density_number(population_density_formatted))

lemur:::population_density_description(level, neighbourhood, population_density, population_density_formatted)

lemur:::population_density_plot(dataset, compare)
```

# Household size 

```{r household-size, fig.alt = lemur:::household_size_plot_alt_text(level, neighbourhood)}
lemur:::household_size_description(level, neighbourhood)

lemur:::household_size_plot(dataset, compare)

lemur:::generate_table(dataset, "household_size", compare, "Household Size", "Percent")
```
